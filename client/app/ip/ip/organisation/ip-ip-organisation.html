<div data-ng-controller="IpOrganisationCtrl">

    <oui-back-button data-title="{{:: tr('ip_organisation_title') }}"
                     data-on-click="hideOrganisation()">
    </oui-back-button>

    <div class="mt-5 mb-2">
        <button class="btn btn-default"
                type="button"
                data-ng-click="setAction('ip/organisation/add-or-edit/ip-ip-organisation-add-or-edit')"
                data-i18n-static="ip_organisation_add">
        </button>
    </div>

    <div class="table-responsive">
        <table id="module-table-multi"
               class="table table-hover">
            <thead>
                <tr>
                    <th scope="col"></th>
                    <th scope="col" data-i18n-static="ip_organisation_table_organisation"></th>
                    <th scope="col" data-i18n-static="ip_organisation_table_type"></th>
                    <th scope="col" data-i18n-static="ip_organisation_table_lastname"></th>
                    <th scope="col" data-i18n-static="ip_organisation_table_abuse"></th>
                    <th scope="col" ></th>
                </tr>
            </thead>

            <tbody data-ng-show="loadingOrganisation">
                <tr>
                    <td colspan="6"
                        class="text-center">
                        <oui-spinner data-size="s"></oui-spinner>
                    </td>
                </tr>
            </tbody>

            <tbody data-ng-show="!organisations.length && !loadingOrganisation">
                <tr>
                    <td colspan="6"
                        class="text-center"
                        data-i18n-static="ip_organisation_table_empty">
                    </td>
                </tr>
            </tbody>

            <tbody data-ng-show="!loadingOrganisation"
                   data-ng-repeat="organisation in organisations">
                <tr>
                    <th scope="row">
                        <button type="button"
                                class="btn btn-link"
                                data-ng-click="open = !open">
                            <span class="fa"
                               data-ng-class="{
                                   'fa-chevron-right': !open,
                                   'fa-chevron-down': open
                               }"
                               aria-hidden="true">
                            </span>
                        </button>
                    </th>
                    <td data-ng-bind="organisation.organisationId"></td>
                    <td data-ng-bind="organisation.registry"></td>
                    <td>
                        <span data-ng-bind="organisation.firstname"></span>
                        <span data-ng-bind="organisation.lastname"></span>
                    </td>
                    <td data-ng-bind="organisation.abuse_mailbox"></td>
                    <td>
                        <oui-action-menu align="end"
                                         compact>
                            <oui-action-menu-item text="{{:: tr('ip_organisation_edit') }}"
                                                  on-click="setAction('ip/organisation/add-or-edit/ip-ip-organisation-add-or-edit', organisation)">
                            </oui-action-menu-item>
                        </oui-action-menu>
                    </td>
                </tr>
                <tr data-ng-show="open">
                    <td></td>
                    <td colspan="2" data-i18n-static="ip_organisation_table_phone"></td>
                    <td colspan="3" data-i18n-static="ip_organisation_table_address"></td>
                </tr>
                <tr data-ng-show="open">
                    <td></td>
                    <td colspan="2" data-ng-bind="organisation.phone"></td>
                    <td colspan="3" data-ng-bind="organisation | address"></td>
                </tr>
            </tbody>
        </table>

    </div>
</div>
